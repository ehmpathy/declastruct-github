# Self-Review: Blueprint Verification v2

## Verification Summary

### Phase 1: Domain Objects ✅
- [x] `src/domain.objects/DeclaredGithubAppPermissions.ts` - exists
- [x] `src/domain.objects/DeclaredGithubApp.ts` - exists
- [x] `src/domain.objects/DeclaredGithubAppInstallation.ts` - exists

**Deviation:** Blueprint used `targetType`/`targetLogin`, implementation uses `target: { type, slug }` - this is an intentional improvement.

### Phase 2: SDK Client ✅
- [x] No changes needed to `getGithubClient.ts` - confirmed unchanged

### Phase 3: Domain Operations ✅
- [x] `src/domain.operations/app/getOneApp.ts` - exists
- [x] `src/domain.operations/app/setApp.ts` - exists
- [x] `src/domain.operations/app/castToDeclaredGithubApp.ts` - exists
- [x] `src/domain.operations/appInstallation/getOneAppInstallation.ts` - exists
- [x] `src/domain.operations/appInstallation/setAppInstallation.ts` - exists
- [x] `src/domain.operations/appInstallation/deleteAppInstallation.ts` - exists
- [x] `src/domain.operations/appInstallation/castToDeclaredGithubAppInstallation.ts` - exists

### Phase 4: Access DAOs ✅
- [x] `src/access/daos/DeclaredGithubAppDao.ts` - exists
- [x] `src/access/daos/DeclaredGithubAppInstallationDao.ts` - exists

### Phase 5: Provider Integration ✅
- [x] `src/domain.objects/DeclastructGithubProvider.ts` - updated
- [x] `src/domain.operations/provider/getDeclastructGithubProvider.ts` - updated
- [x] `src/contract/sdks/index.ts` - exports all 3 new domain objects

### Phase 6: Testing ✅
- [x] `setApp.test.ts` - exists
- [x] `setAppInstallation.test.ts` - exists
- [x] `deleteAppInstallation.test.ts` - exists (bonus)
- [x] `getOneApp.integration.test.ts` - exists
- [x] `getOneAppInstallation.integration.test.ts` - exists
- [x] `declastruct.apps.acceptance.test.ts` - exists
- [x] `resources.apps.acceptance.ts` - exists

### Phase 7: Documentation & Examples
- [x] `examples/workflows/github-app-token.yml` - exists
- [ ] `examples/resources/github-apps.ts` - **MISSING**

### Phase 8: Provision Files ✅
- [x] `provision/github.apps/resources.ts` - exists
- [x] `provision/github.apps/resources.app.declastruct-github.ts` - exists
- [x] `provision/github.apps/resources.app.please-release.ts` - exists
- [x] `provision/github.apps/readme.md` - exists

### Phase 9: Workflow Integration ✅
- [x] `.github/workflows/provision.yml` - updated with app token generation

---

## BLOCKERs

### BLOCKER.1: Acceptance test references wrong app slug
**File:** `src/contract/sdks/declastruct.apps.acceptance.test.ts:85`
```typescript
expect(appResource.forResource.slug).toContain('github-actions');
```
**Issue:** This references `github-actions` but `resources.apps.acceptance.ts` now declares `declastruct-github-demo-app`
**Fix:** Update test expectation to match resources file

---

## NITPICKs

### NITPICK.1: Missing `examples/resources/github-apps.ts`
**Blueprint:** Phase 7.2 specifies creating `examples/resources/github-apps.ts`
**Current:** File does not exist
**Fix:** Create the example file OR remove from blueprint if not needed (provision files serve same purpose)

### NITPICK.2: workflow uses actions/create-github-app-token@v1, blueprint shows @v2
**File:** `.github/workflows/provision.yml:26`
```yaml
uses: actions/create-github-app-token@v1
```
**Blueprint:** Shows `actions/create-github-app-token@v2`
**Fix:** Update to @v2 for consistency with blueprint
