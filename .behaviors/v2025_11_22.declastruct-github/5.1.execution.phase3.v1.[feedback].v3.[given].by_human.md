emit your response into .behaviors/v2025_11_22.declastruct-github/5.1.execution.phase3.v1.[feedback].v3.[taken].by_robot.md


 ===



 # nitpick.1

pull this into a named procedure, out of src/domain.operations/branch/setBranch.ts

```ts
        // otherwise, get default branch SHA
        const repoResponse = await github.repos.get({
          owner: desired.repo.owner,
          repo: desired.repo.name,
        });

        const defaultBranch = repoResponse.data.default_branch;
        const defaultBranchData = await getBranch(
          {
            by: {
              unique: {
                repo: desired.repo,
                name: defaultBranch,
              },
            },
          },
          context,
        );

        if (!defaultBranchData?.commit?.sha) {
          UnexpectedCodePathError.throw('default branch has no commit', {
            defaultBranch,
          });
        }

        return defaultBranchData.commit.sha;
```


call it `getBranchCommitShaByRepoDefault({ })`


that way, we can decrease the complexity within src/domain.operations/branch/setBranch.ts

